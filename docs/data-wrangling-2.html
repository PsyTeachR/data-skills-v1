<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 Data wrangling 2 | Data Skills</title>
<meta name="author" content="Heather Cleland-Woods and Emily Nordmann">
<meta name="description" content="6.1 Walkthrough video There is a walkthrough video of this chapter available via Zoom. Video notes: this video was recorded in 2020, it uses the server, and the book has been updated visually....">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 6 Data wrangling 2 | Data Skills">
<meta property="og:type" content="book">
<meta property="og:url" content="https://psyteachr.github.io/data-skills-v1/data-wrangling-2.html">
<meta property="og:image" content="https://psyteachr.github.io/data-skills-v1/images/logos/twitter_card.png">
<meta property="og:description" content="6.1 Walkthrough video There is a walkthrough video of this chapter available via Zoom. Video notes: this video was recorded in 2020, it uses the server, and the book has been updated visually....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 6 Data wrangling 2 | Data Skills">
<meta name="twitter:description" content="6.1 Walkthrough video There is a walkthrough video of this chapter available via Zoom. Video notes: this video was recorded in 2020, it uses the server, and the book has been updated visually....">
<meta name="twitter:image" content="https://psyteachr.github.io/data-skills-v1/images/logos/twitter_card.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6NP3MF25W3');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="psyTeachR Books">Data Skills</a>:
        <small class="text-muted">psyTeachR Books</small>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Overview</a></li>
<li><a class="" href="getting-to-know-the-data.html"><span class="header-section-number">1</span> Getting to know the data</a></li>
<li><a class="" href="programming-basics.html"><span class="header-section-number">2</span> Programming basics</a></li>
<li><a class="" href="ref1.html"><span class="header-section-number">3</span> Intro to R</a></li>
<li><a class="" href="loading-data.html"><span class="header-section-number">4</span> Loading data</a></li>
<li><a class="" href="data-wrangling-1.html"><span class="header-section-number">5</span> Data wrangling 1</a></li>
<li><a class="active" href="data-wrangling-2.html"><span class="header-section-number">6</span> Data wrangling 2</a></li>
<li><a class="" href="intro-to-data-viz.html"><span class="header-section-number">7</span> Intro to Data Viz</a></li>
<li><a class="" href="scatterplots.html"><span class="header-section-number">8</span> Scatterplots</a></li>
<li><a class="" href="aq-data-and-recap.html"><span class="header-section-number">9</span> AQ data and recap</a></li>
<li><a class="" href="reshaping-data.html"><span class="header-section-number">10</span> Reshaping data</a></li>
<li><a class="" href="pipes.html"><span class="header-section-number">11</span> Pipes</a></li>
<li><a class="" href="mega-pipe.html"><span class="header-section-number">12</span> Mega pipe</a></li>
<li><a class="" href="intro-to-probability.html"><span class="header-section-number">13</span> Intro to Probability</a></li>
<li><a class="" href="probability-continued.html"><span class="header-section-number">14</span> Probability continued</a></li>
<li><a class="" href="simulation.html"><span class="header-section-number">15</span> Simulation</a></li>
<li><a class="" href="project-analysis.html"><span class="header-section-number">16</span> Project analysis</a></li>
<li class="book-part">Appendices</li>
<li><a class="" href="installing-r.html"><span class="header-section-number">A</span> Installing R</a></li>
<li><a class="" href="updating-r-rstudio-and-packages.html"><span class="header-section-number">B</span> Updating R, RStudio, and packages</a></li>
<li><a class="" href="exporting-files-from-the-server.html"><span class="header-section-number">C</span> Exporting files from the server</a></li>
<li><a class="" href="symbols.html"><span class="header-section-number">D</span> Symbols</a></li>
<li><a class="" href="license.html">License</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/psyteachr/data-skills-v1">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-wrangling-2" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Data wrangling 2<a class="anchor" aria-label="anchor" href="#data-wrangling-2"><i class="fas fa-link"></i></a>
</h1>
<div id="walkthrough-video-3" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Walkthrough video<a class="anchor" aria-label="anchor" href="#walkthrough-video-3"><i class="fas fa-link"></i></a>
</h2>
<p>There is a <a href="https://uofglasgow.zoom.us/rec/play/Kde7hTS2bAJAvhuAufvxpYi8shgfoSH4kKeWN8YGJ9k1_lbHDFsNzHZBm9Bfu_bKVtcOxoNQbrBf8Ddt.Cy_Kex6M9v1_3v_G?startTime=1602841645000&amp;_x_zm_rtaid=cW5f8v0JQcOlLI1cBpI84g.1628694791961.c3bcc75dbabdfb3f3ac44f8fd7884865&amp;_x_zm_rhtaid=355">walkthrough video</a> of this chapter available via Zoom.</p>
<ul>
<li>Video notes: this video was recorded in 2020, it uses the server, and the book has been updated visually. There are no other differences between the video and this book chapter.</li>
</ul>
</div>
<div id="activity-1-set-up-2" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Activity 1: Set-up<a class="anchor" aria-label="anchor" href="#activity-1-set-up-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Open R Studio and ensure the environment is clear.<br>
</li>
<li>Open the <code>stub-wrangling-2.Rmd</code> file and ensure that the working directory is set to your Data Skills folder and that the two .csv data files (<code>participant-info.csv</code> and <code>ahi-cesd.csv</code>) are in your working directory (you should see them in the file pane).<br>
</li>
<li>If you're on the server, avoid a number of issues by restarting the session - click <code>Session</code> - <code>Restart R</code><br>
</li>
<li>Type and run the below code to load the <code>tidyverse</code> package and to load in the data files.</li>
</ul>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span> 

<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">'ahi-cesd.csv'</span><span class="op">)</span>
<span class="va">pinfo</span> <span class="op">&lt;-</span> <span class="fu">read_csv</span><span class="op">(</span><span class="st">'participant-info.csv'</span><span class="op">)</span>
<span class="va">all_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">pinfo</span>, by<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"intervention"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Now let's start working with our <code>tidyverse</code> verb functions...</p>
</div>
<div id="activity-2-select" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Activity 2: Select<a class="anchor" aria-label="anchor" href="#activity-2-select"><i class="fas fa-link"></i></a>
</h2>
<p>Select the columns all_dat, ahiTotal, cesdTotal, sex, age, educ, income, occasion, elapsed.days from the data and create a variable called <code>summarydata</code>.</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">summarydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">all_dat</span>, <span class="va">ahiTotal</span>, <span class="va">cesdTotal</span>, <span class="va">sex</span>, <span class="va">age</span>, <span class="va">educ</span>, <span class="va">income</span>, <span class="va">occasion</span>, <span class="va">elapsed.days</span><span class="op">)</span></code></pre></div>
<div class="danger">
<p>
If you get an error message when using select that says <code>unused argument</code> it means that it is trying to use the wrong version of the select function. There are two solutions to this, first, save you work and then restart the R session (click session -restart R) and then run all your code above again from the start, or replace <code>select</code> with <code><a href="https://dplyr.tidyverse.org/reference/select.html">dplyr::select</a></code> which tells R exactly which version of the select function to use. We'd recommend restarting the session because this will get you in the habit and it's a useful thing to try for a range of problems
</p>
</div>
<hr>
<p><strong>Pause here and interpret the above code and output</strong></p>
<ul>
<li>How you would translate this code into English</li>
<li>What columns have been removed from the data?</li>
</ul>
<hr>
</div>
<div id="activity-3-arrange" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Activity 3: Arrange<a class="anchor" aria-label="anchor" href="#activity-3-arrange"><i class="fas fa-link"></i></a>
</h2>
<p>Arrange the data in the variable created above (<code>summarydata</code>) by ahiTotal with lowest score first.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ahi_asc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">summarydata</span>, by <span class="op">=</span> <span class="va">ahiTotal</span><span class="op">)</span></code></pre></div>
<hr>
<ul>
<li>How could you arrange this data in <strong>descending</strong> order (highest score first)?</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">summarydata</span>, by <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">ahiTotal</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<ul>
<li><p>What is the smallest ahiTotal score? <input class="webex-solveme nospaces" size="2" data-answer='["32"]'></p></li>
<li><p>What is the largest ahiTotal score? <input class="webex-solveme nospaces" size="3" data-answer='["114"]'></p></li>
</ul>
<hr>
</div>
<div id="activity-4-filter" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Activity 4: Filter<a class="anchor" aria-label="anchor" href="#activity-4-filter"><i class="fas fa-link"></i></a>
</h2>
<p>Filter the data <code>ahi_asc</code> by taking out those who are over 65 years of age.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">age_65max</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">ahi_asc</span>, <span class="va">age</span> <span class="op">&lt;=</span> <span class="fl">65</span><span class="op">)</span></code></pre></div>
<hr>
<ul>
<li>What does <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code> do?</li>
</ul>
<p><select class="webex-select"><option value="blank"></option>
<option value="">splits a column into multiple columns</option>
<option value="">transforms existing columns</option>
<option value="">takes multiple columns and collapses them together</option>
<option value="answer">removes information that we are not interested in</option></select></p>
<ul>
<li>How many observations are left in <code>age_65max</code> after running <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>? <input class="webex-solveme nospaces" size="3" data-answer='["950"]'>
</li>
</ul>
<hr>
</div>
<div id="activity-5-summarise" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Activity 5: Summarise<a class="anchor" aria-label="anchor" href="#activity-5-summarise"><i class="fas fa-link"></i></a>
</h2>
<p>Then, use summarise to create a new variable <code>data_median</code>, which calculates the median ahiTotal score in this grouped data and assign it a table head called <code>median_score</code>.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_median</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">age_65max</span>, median_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">ahiTotal</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<hr>
<ul>
<li><p>What is the median score? <input class="webex-solveme nospaces" size="2" data-answer='["74"]'></p></li>
<li><p>Change the above code to give you the <strong>mean score</strong>. What is the mean score to 2 decimal places? <input class="webex-solveme nospaces" size="5" data-answer='["72.5","72.50"]'></p></li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">age_65max</span>, mean_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">ahiTotal</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<hr>
</div>
<div id="activity-6-group_by" class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> Activity 6: Group_by<a class="anchor" aria-label="anchor" href="#activity-6-group_by"><i class="fas fa-link"></i></a>
</h2>
<p>Use mutate to create a new column called <code>Happiness_Category</code> in <code>age_65max</code> which categorises participants based on whether they score above the median <code>ahiTotal</code> score for all participants.</p>
<p>Then, group the data stored in <code>age_65max</code> by <code>Happiness_Category</code>, and store it in an object named <code>happy_dat</code>.</p>
<p>Finally, use summarise to calculate the median <code>cesdTotal</code> score for participants who scored above and below the median <code>ahiTotal</code> score and save it in a new object named <code>data_median_group</code>.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">age_65max</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">age_65max</span>, Happiness_Category <span class="op">=</span> <span class="op">(</span><span class="va">ahiTotal</span> <span class="op">&gt;</span> <span class="fl">74</span><span class="op">)</span><span class="op">)</span>
<span class="va">happy_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">age_65max</span>, <span class="va">Happiness_Category</span><span class="op">)</span>

<span class="va">data_median_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">happy_dat</span>, median_score <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">cesdTotal</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="info">
<p>
If you get what looks like an error that says <code>summarise() ungrouping output (override with .groups argument)</code>don't worry, this isn't an error it's just R telling you what it's done. This message was included in a very recent update to the <code>tidyverse</code> which is why it doesn't appear on some of the walkthrough vidoes.
</p>
</div>
<hr>
<p><strong>Pause here and interpret the above code and output</strong></p>
<ul>
<li>What does <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> do?</li>
</ul>
<div id="radio_YGRDVMFDHB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YGRDVMFDHB" value=""><span>provides summary statistics of an existing dataframe</span></label><label><input type="radio" autocomplete="off" name="radio_YGRDVMFDHB" value=""><span>organises information in ascending or descending order</span></label><label><input type="radio" autocomplete="off" name="radio_YGRDVMFDHB" value=""><span>transforms existing columns</span></label><label><input type="radio" autocomplete="off" name="radio_YGRDVMFDHB" value="answer"><span>groups data frames based on a specific column so that all later operations are carried out on a group basis</span></label>
</div>
<ul>
<li>How would you change the code to group by education rather than <code>Happiness_Category</code>?</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">age_65max</span>, <span class="va">educ</span><span class="op">)</span></code></pre></div>
</div>
<hr>
</div>
<div id="activity-7-data-visualisation" class="section level2" number="6.8">
<h2>
<span class="header-section-number">6.8</span> Activity 7: Data visualisation<a class="anchor" aria-label="anchor" href="#activity-7-data-visualisation"><i class="fas fa-link"></i></a>
</h2>
<p>Copy, paste and run the below code into a new code chunk to create a plot of depression scores grouped by income level using the <code>age_65max</code> data.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">age_65max</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">cesdTotal</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_violin</span><span class="op">(</span>trim <span class="op">=</span> <span class="cn">FALSE</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span>, alpha <span class="op">=</span> <span class="fl">.6</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_boxplot</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">.2</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span>, alpha <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_fill_viridis_d</span><span class="op">(</span>option <span class="op">=</span> <span class="st">"D"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_x_discrete</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Income Level"</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Below Average"</span>, <span class="st">"Average"</span>, <span class="st">"Above Average"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_y_continuous</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Depression Score"</span><span class="op">)</span></code></pre></div>
<ul>
<li><p>Which income group has the highest median depression scores? <select class="webex-select"><option value="blank"></option>
<option value="answer">Below Average</option>
<option value="">Average</option>
<option value="">Above Average</option></select></p></li>
<li><p>Which group has the highest density of scores at any one point? <select class="webex-select"><option value="blank"></option>
<option value="">Below Average</option>
<option value="">Average</option>
<option value="answer">Above Average</option></select></p></li>
</ul>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<p>Density is represented by the curvy line around the boxplot that looks a little bit like a (drunk) violin. The fatter the violin, the more data points there are at any one point. This means that in the above plot, the Above Average group has the highest density because this has the widest violin, i.e., there are lots of people in the Above Average income group with a score of about 5.</p>
</div>
<ul>
<li>Is income group a between-subject or within-subject variable? <select class="webex-select"><option value="blank"></option>
<option value="answer">Between-subjects</option>
<option value="">Within-subjects</option></select>
</li>
</ul>
<div class="webex-solution">
<button>
Explain This Answer
</button>
<p>Between-subjects designs are where different participants are in different groups. Within-subject designs are when the same participants are in all groups. Income is an example of a between-subject variable because participants can only be in one grouping level of the independent variable</p>
</div>
</div>
<div id="activity-8-make-r-your-own" class="section level2" number="6.9">
<h2>
<span class="header-section-number">6.9</span> Activity 8: Make R your own<a class="anchor" aria-label="anchor" href="#activity-8-make-r-your-own"><i class="fas fa-link"></i></a>
</h2>
<p>Finally, you can customise how R Studio looks to make it feel more like your own personal version. Click <code>Tools</code> - <code>Global Options</code> - <code>Apperance</code>. You can change the default font, font size, and general appearance of R Studio, including using dark mode. Play around with the settings and see which one you prefer - you're going to spend a lot of time with R, it might as well look nice!</p>
</div>
<div id="finished-3" class="section level2" number="6.10">
<h2>
<span class="header-section-number">6.10</span> Finished!<a class="anchor" aria-label="anchor" href="#finished-3"><i class="fas fa-link"></i></a>
</h2>
<p>Well done! As a final step, try knitting the file to HTML. Remember to save your Markdown in your Data Skills folder and make a note of any mistakes you made and how you fixed them.</p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );
});
</script><div class="chapter-nav">
<div class="prev"><a href="data-wrangling-1.html"><span class="header-section-number">5</span> Data wrangling 1</a></div>
<div class="next"><a href="intro-to-data-viz.html"><span class="header-section-number">7</span> Intro to Data Viz</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-wrangling-2"><span class="header-section-number">6</span> Data wrangling 2</a></li>
<li><a class="nav-link" href="#walkthrough-video-3"><span class="header-section-number">6.1</span> Walkthrough video</a></li>
<li><a class="nav-link" href="#activity-1-set-up-2"><span class="header-section-number">6.2</span> Activity 1: Set-up</a></li>
<li><a class="nav-link" href="#activity-2-select"><span class="header-section-number">6.3</span> Activity 2: Select</a></li>
<li><a class="nav-link" href="#activity-3-arrange"><span class="header-section-number">6.4</span> Activity 3: Arrange</a></li>
<li><a class="nav-link" href="#activity-4-filter"><span class="header-section-number">6.5</span> Activity 4: Filter</a></li>
<li><a class="nav-link" href="#activity-5-summarise"><span class="header-section-number">6.6</span> Activity 5: Summarise</a></li>
<li><a class="nav-link" href="#activity-6-group_by"><span class="header-section-number">6.7</span> Activity 6: Group_by</a></li>
<li><a class="nav-link" href="#activity-7-data-visualisation"><span class="header-section-number">6.8</span> Activity 7: Data visualisation</a></li>
<li><a class="nav-link" href="#activity-8-make-r-your-own"><span class="header-section-number">6.9</span> Activity 8: Make R your own</a></li>
<li><a class="nav-link" href="#finished-3"><span class="header-section-number">6.10</span> Finished!</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/psyteachr/data-skills-v1/blob/master/book/06-wrangling-2.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/psyteachr/data-skills-v1/edit/master/book/06-wrangling-2.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Skills</strong>: psyTeachR Books" was written by Heather Cleland-Woods and Emily Nordmann. It was last built on 2022-03-07.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
